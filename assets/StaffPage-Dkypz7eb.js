import{d as Y,g as Z,t as Q,s as O,j as e,h as W,i as ee,v as be,w as ue,c as _,e as oe,x as Ce,f as X,m as te,y as le,z as ie,T as R,u as je,a as Se,C as V,D as J,B as A,I as ye,o as ve,M as ce,E as Pe,F as ke,H as we}from"./index-DTehqcyh.js";import{r as p}from"./vendor-nY0NvAmL.js";import{B as K}from"./Button-BjlhxKJZ.js";import{A as Fe,C as Re,T as ze,a as Be,b as Ie,c as de,d as x,e as De,M as Ae,E as Te,D as Me,f as Ee,g as $e,h as Le,G as N,i as Ue,S as We}from"./MoreVert-BNaklvyy.js";import{b as Ne,u as ne,f as he,E as Oe,T as pe,A as Ge}from"./Email-BOEMhuZM.js";import"./react-DJG_os-6.js";function He(s){return Y("PrivateSwitchBase",s)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const qe=s=>{const{classes:o,checked:a,disabled:l,edge:d}=s,u={root:["root",a&&"checked",l&&"disabled",d&&`edge${W(d)}`],input:["input"]};return ee(u,He,o)},_e=O(be,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:s,ownerState:o})=>s==="start"&&o.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:s,ownerState:o})=>s==="end"&&o.size!=="small",style:{marginRight:-12}}]}),Ve=O("input",{name:"MuiSwitchBase",shouldForwardProp:ue})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Je=p.forwardRef(function(o,a){const{autoFocus:l,checked:d,checkedIcon:u,defaultChecked:n,disabled:h,disableFocusRipple:C=!1,edge:S=!1,icon:f,id:T,inputProps:M,inputRef:i,name:E,onBlur:c,onChange:g,onFocus:y,readOnly:z,required:F=!1,tabIndex:v,type:P,value:k,slots:$={},slotProps:B={},...I}=o,[L,G]=Ne({controlled:d,default:!!n,name:"SwitchBase",state:"checked"}),j=ne(),D=m=>{y&&y(m),j&&j.onFocus&&j.onFocus(m)},b=m=>{c&&c(m),j&&j.onBlur&&j.onBlur(m)},t=m=>{if(m.nativeEvent.defaultPrevented)return;const w=m.target.checked;G(w),g&&g(m,w)};let r=h;j&&typeof r>"u"&&(r=j.disabled);const U=P==="checkbox"||P==="radio",H={...o,checked:L,disabled:r,disableFocusRipple:C,edge:S},re=qe(H),ae={slots:$,slotProps:{input:M,...B}},[me,xe]=Q("root",{ref:a,elementType:_e,className:re.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ae,component:"span",...I},getSlotProps:m=>({...m,onFocus:w=>{m.onFocus?.(w),D(w)},onBlur:w=>{m.onBlur?.(w),b(w)}}),ownerState:H,additionalProps:{centerRipple:!0,focusRipple:!C,disabled:r,role:void 0,tabIndex:null}}),[fe,ge]=Q("input",{ref:i,elementType:Ve,className:re.input,externalForwardedProps:ae,getSlotProps:m=>({...m,onChange:w=>{m.onChange?.(w),t(w)}}),ownerState:H,additionalProps:{autoFocus:l,checked:d,defaultChecked:n,disabled:r,id:U?T:void 0,name:E,readOnly:z,required:F,tabIndex:v,type:P,...P==="checkbox"&&k===void 0?{}:{value:k}}});return e.jsxs(me,{...xe,children:[e.jsx(fe,{...ge}),L?u:f]})}),Ke=_(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Qe=_(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Xe=_(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Ye(s){return Y("MuiCheckbox",s)}const se=Z("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Ze=s=>{const{classes:o,indeterminate:a,color:l,size:d}=s,u={root:["root",a&&"indeterminate",`color${W(l)}`,`size${W(d)}`]},n=ee(u,Ye,o);return{...o,...n}},es=O(Je,{shouldForwardProp:s=>ue(s)||s==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:a}=s;return[o.root,a.indeterminate&&o.indeterminate,o[`size${W(a.size)}`],a.color!=="default"&&o[`color${W(a.color)}`]]}})(te(({theme:s})=>({color:(s.vars||s).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.action.activeChannel} / ${s.vars.palette.action.hoverOpacity})`:le(s.palette.action.active,s.palette.action.hoverOpacity)}}},...Object.entries(s.palette).filter(ie()).map(([o])=>({props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette[o].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:le(s.palette[o].main,s.palette.action.hoverOpacity)}}})),...Object.entries(s.palette).filter(ie()).map(([o])=>({props:{color:o},style:{[`&.${se.checked}, &.${se.indeterminate}`]:{color:(s.vars||s).palette[o].main},[`&.${se.disabled}`]:{color:(s.vars||s).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),ss=e.jsx(Qe,{}),os=e.jsx(Ke,{}),ts=e.jsx(Xe,{}),ns=p.forwardRef(function(o,a){const l=oe({props:o,name:"MuiCheckbox"}),{checkedIcon:d=ss,color:u="primary",icon:n=os,indeterminate:h=!1,indeterminateIcon:C=ts,inputProps:S,size:f="medium",disableRipple:T=!1,className:M,slots:i={},slotProps:E={},...c}=l,g=h?C:n,y=h?C:d,z={...l,disableRipple:T,color:u,indeterminate:h,size:f},F=Ze(z),v=E.input??S,[P,k]=Q("root",{ref:a,elementType:es,className:X(F.root,M),shouldForwardComponentProp:!0,externalForwardedProps:{slots:i,slotProps:E,...c},ownerState:z,additionalProps:{type:"checkbox",icon:p.cloneElement(g,{fontSize:g.props.fontSize??f}),checkedIcon:p.cloneElement(y,{fontSize:y.props.fontSize??f}),disableRipple:T,slots:i,slotProps:{input:Ce(typeof v=="function"?v(z):v,{"data-indeterminate":h})}}});return e.jsx(P,{...k,classes:F})});function rs(s){return Y("MuiFormControlLabel",s)}const q=Z("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),as=s=>{const{classes:o,disabled:a,labelPlacement:l,error:d,required:u}=s,n={root:["root",a&&"disabled",`labelPlacement${W(l)}`,d&&"error",u&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",d&&"error"]};return ee(n,rs,o)},ls=O("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:a}=s;return[{[`& .${q.label}`]:o.label},o.root,o[`labelPlacement${W(a.labelPlacement)}`]]}})(te(({theme:s})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${q.disabled}`]:{cursor:"default"},[`& .${q.label}`]:{[`&.${q.disabled}`]:{color:(s.vars||s).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:o})=>o==="start"||o==="top"||o==="bottom",style:{marginLeft:16}}]}))),is=O("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(te(({theme:s})=>({[`&.${q.error}`]:{color:(s.vars||s).palette.error.main}}))),cs=p.forwardRef(function(o,a){const l=oe({props:o,name:"MuiFormControlLabel"}),{checked:d,className:u,componentsProps:n={},control:h,disabled:C,disableTypography:S,inputRef:f,label:T,labelPlacement:M="end",name:i,onChange:E,required:c,slots:g={},slotProps:y={},value:z,...F}=l,v=ne(),P=C??h.props.disabled??v?.disabled,k=c??h.props.required,$={disabled:P,required:k};["checked","name","onChange","value","inputRef"].forEach(t=>{typeof h.props[t]>"u"&&typeof l[t]<"u"&&($[t]=l[t])});const B=he({props:l,muiFormControl:v,states:["error"]}),I={...l,disabled:P,labelPlacement:M,required:k,error:B.error},L=as(I),G={slots:g,slotProps:{...n,...y}},[j,D]=Q("typography",{elementType:R,externalForwardedProps:G,ownerState:I});let b=T;return b!=null&&b.type!==R&&!S&&(b=e.jsx(j,{component:"span",...D,className:X(L.label,D?.className),children:b})),e.jsxs(ls,{className:X(L.root,u),ownerState:I,ref:a,...F,children:[p.cloneElement(h,$),k?e.jsxs("div",{children:[b,e.jsxs(is,{ownerState:I,"aria-hidden":!0,className:L.asterisk,children:["â€‰","*"]})]}):b]})});function ds(s){return Y("MuiFormGroup",s)}Z("MuiFormGroup",["root","row","error"]);const ps=s=>{const{classes:o,row:a,error:l}=s;return ee({root:["root",a&&"row",l&&"error"]},ds,o)},us=O("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:a}=s;return[o.root,a.row&&o.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),hs=p.forwardRef(function(o,a){const l=oe({props:o,name:"MuiFormGroup"}),{className:d,row:u=!1,...n}=l,h=ne(),C=he({props:l,muiFormControl:h,states:["error"]}),S={...l,row:u,error:C.error},f=ps(S);return e.jsx(us,{className:X(f.root,d),ownerState:S,ref:a,...n})}),ms=_(e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),xs=_(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),fs=["create","view","edit","delete"];function vs(){const{users:s,isLoading:o,isSuccess:a,addSuccess:l,updateSuccess:d,deleteSuccess:u}=je(t=>t.user),n=Se(),[h,C]=p.useState(null),[S,f]=p.useState(null),[T,M]=p.useState(!1),[i,E]=p.useState(""),[c,g]=p.useState({name:"",email:"",permissions:[]}),[y,z]=p.useState({open:!1,type:"success",message:""}),F=(t,r)=>{z({open:!0,type:t,message:r})};p.useEffect(()=>()=>{a&&n(V())},[n,a]),p.useEffect(()=>{n(J())},[n]),p.useEffect(()=>{l&&i==="add"&&(B(),n(V()),F("success","Staff added successfully!"),n(J()))},[l,i,n]),p.useEffect(()=>{d&&i==="edit"&&(B(),F("success","Staff updated successfully!"),n(V()),n(J()))},[d,i,n]),p.useEffect(()=>{u&&i==="delete"&&(B(),F("success","Staff deleted successfully!"),n(V()),n(J()))},[u,i,n]);const v=(t,r)=>{r!=="clickaway"&&z(U=>({...U,open:!1}))},P=(t,r)=>{C(t.currentTarget),f(r)},k=()=>{C(null),f(null)},$=(t,r=null)=>{E(t),f(r),g(r?{_id:r._id||"",name:r.name||"",email:r.email||"",permissions:r.permissions||[]}:{_id:"",name:"",email:"",permissions:[]}),M(!0),k()},B=()=>{M(!1),f(null),E(""),g({_id:"",name:"",email:"",permissions:[]})},I=t=>{const{name:r,value:U}=t.target;g(H=>({...H,[r]:U}))},L=t=>{g(r=>({...r,permissions:r.permissions.includes(t)?r.permissions.filter(U=>U!==t):[...r.permissions,t]}))},G=()=>{if(i==="edit"){const t={_id:c._id,name:c.name,email:c.email,permissions:c.permissions};n(Pe(t))}else if(i==="add"){const t={name:c.name,email:c.email,role:"staff",permissions:c.permissions,password:"123456"};n(ke(t))}},j=()=>{n(we(c._id))},D=(t,r)=>t?.permissions?.includes(r),b=({hasPermission:t})=>t?e.jsx(ms,{sx:{color:"success.main",fontSize:20}}):e.jsx(xs,{sx:{color:"error.main",fontSize:20}});return e.jsxs(A,{children:[e.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(A,{children:[e.jsx(R,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Staff Management"}),e.jsx(R,{variant:"body1",color:"text.secondary",children:"Manage staff permissions and access controls"})]}),e.jsx(K,{variant:"contained",startIcon:e.jsx(Fe,{}),onClick:()=>$("add"),sx:{borderRadius:2,textTransform:"none",px:3,py:1.5},children:"Add Staff Member"})]}),o?e.jsx(A,{sx:{textAlign:"center",mt:5},children:e.jsx(R,{variant:"h6",color:"text.secondary",children:"Loading staff..."})}):s.length===0?e.jsx(A,{sx:{textAlign:"center",mt:5},children:e.jsx(R,{variant:"h6",color:"text.secondary",children:"No staff members found."})}):e.jsx(Re,{children:e.jsx(ze,{children:e.jsxs(Be,{children:[e.jsx(Ie,{children:e.jsxs(de,{sx:{backgroundColor:"#f8f9fa"},children:[e.jsx(x,{sx:{fontWeight:"bold",py:2},children:"Staff Member"}),e.jsx(x,{sx:{fontWeight:"bold"},children:"Contact"}),e.jsx(x,{sx:{fontWeight:"bold",textAlign:"center"},children:"Create"}),e.jsx(x,{sx:{fontWeight:"bold",textAlign:"center"},children:"Read"}),e.jsx(x,{sx:{fontWeight:"bold",textAlign:"center"},children:"Update"}),e.jsx(x,{sx:{fontWeight:"bold",textAlign:"center"},children:"Delete"}),e.jsx(x,{sx:{fontWeight:"bold",textAlign:"center"},children:"Actions"})]})}),e.jsx(De,{children:s.map(t=>e.jsxs(de,{sx:{"&:hover":{backgroundColor:"#f8f9fa"}},children:[e.jsx(x,{children:e.jsx(A,{children:e.jsx(R,{variant:"body1",fontWeight:"600",children:t?.name})})}),e.jsx(x,{children:e.jsx(A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Oe,{fontSize:"small",color:"action"}),e.jsx(R,{variant:"body2",children:t?.email})]})})}),e.jsx(x,{align:"center",children:e.jsx(b,{hasPermission:D(t,"create")})}),e.jsx(x,{align:"center",children:e.jsx(b,{hasPermission:D(t,"view")})}),e.jsx(x,{align:"center",children:e.jsx(b,{hasPermission:D(t,"edit")})}),e.jsx(x,{align:"center",children:e.jsx(b,{hasPermission:D(t,"delete")})}),e.jsx(x,{align:"center",children:e.jsx(ye,{onClick:r=>P(r,t),size:"small",children:e.jsx(Ae,{})})})]},t?._id))})]})})}),e.jsxs(ve,{anchorEl:h,open:!!h,onClose:k,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(ce,{onClick:()=>$("edit",S),children:[e.jsx(Te,{fontSize:"small",sx:{mr:1}}),"Edit Staff"]}),e.jsxs(ce,{onClick:()=>$("delete",S),children:[e.jsx(Me,{fontSize:"small",sx:{mr:1}}),"Delete Staff"]})]}),e.jsxs(Ee,{open:T,onClose:B,maxWidth:"sm",fullWidth:!0,children:[e.jsxs($e,{children:[i==="add"&&"Add New Staff Member",i==="edit"&&"Edit Staff Member",i==="delete"&&"Delete Staff Member"]}),e.jsx(Le,{children:i==="delete"?e.jsx(R,{sx:{pt:2},children:"Are you sure you want to delete? This action cannot be undone."}):e.jsx(A,{sx:{pt:2},children:e.jsxs(N,{container:!0,spacing:3,children:[e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{fullWidth:!0,label:"Full Name",name:"name",value:c.name,onChange:I,disabled:i==="view"})}),e.jsx(N,{item:!0,xs:12,children:e.jsx(pe,{fullWidth:!0,label:"Email",name:"email",type:"email",value:c.email,onChange:I,disabled:i==="view"})}),e.jsxs(N,{item:!0,xs:12,children:[e.jsx(R,{variant:"h6",sx:{mb:2},children:"Permissions"}),e.jsx(hs,{children:e.jsx(N,{container:!0,spacing:2,children:fs.map(t=>e.jsx(N,{item:!0,xs:6,children:e.jsx(cs,{control:e.jsx(ns,{checked:c.permissions.includes(t),onChange:()=>L(t),disabled:i==="view"}),label:t.charAt(0).toUpperCase()+t.slice(1)})},t))})})]})]})})}),e.jsxs(Ue,{sx:{p:3},children:[e.jsx(K,{onClick:B,color:"inherit",children:"Cancel"}),i==="delete"&&e.jsx(K,{variant:"contained",color:"error",onClick:j,children:"Delete"}),(i==="add"||i==="edit")&&e.jsx(K,{variant:"contained",color:"primary",onClick:G,disabled:!c.name||!c.email,children:i==="add"?"Add Staff Member":"Save Changes"})]})]}),e.jsx(We,{open:y.open,autoHideDuration:4e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(Ge,{onClose:v,severity:y.type,variant:"filled",sx:{width:"100%"},children:y.message})})]})}export{vs as default};
